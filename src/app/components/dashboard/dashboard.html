<div class="dashboard-wrapper">
  <div class="stats-row">
    <div class="stat-card">
      <p class="label">La Technology la plus adopt√©e</p>
      <p class="value blue-text">{{ mostUsedTech }}</p>
    </div>
    <div class="stat-card">
      <p class="label">L'offre la plus suivie</p>
      <p class="value blue-text">{{ mostFollowedOffer }}</p>
    </div>
    <div class="stat-card">
      <p class="label">Total des Offres</p>
      <p class="value big-number">{{ totalOffers }}</p>
    </div>
  </div>

  <h2>Nos Offres:</h2>
  <div class="grid-container">
    <div *ngFor="let offer of offres" class="offer-card" [class.featured]="offer.popular">
      <span *ngIf="offer.popular" class="badge">Popular</span>
      <h3>{{ offer.nom }}</h3>
      <div class="price">${{ offer.prix }}<span>/Month</span></div>
      <ul>
        <li *ngFor="let tech of offer.technologies">{{ tech.nom }}</li>
      </ul>
    </div>
  </div>

  <h2>Nos Technologes:</h2>
  <div class="grid-container">
    <div *ngFor="let tech of techs" class="tech-card">
      <div class="tech-icon-box">
        <img *ngIf="tech.photo" [src]="getPhotoUrl(tech.photo, tech.nom)" alt="{{ tech.nom }}" class="tech-photo">
        <span *ngIf="!tech.photo">{{ tech.nom[0] }}</span>
      </div>
      <h4>{{ tech.nom }}</h4>
      <button class="btn-outline" (click)="openTechnologyModal(tech)">Savoir Plus</button>
    </div>
  </div>

  <!-- Technology Detail Modal -->
  <div class="modal" [class.show]="showTechnologyModal">
    <div class="modal-content" *ngIf="selectedTechnology">
      <div class="modal-header">
        <h3>{{ selectedTechnology.nom }}</h3>
        <button class="close-btn" (click)="closeTechnologyModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="tech-modal-photo">
          <img [src]="getPhotoUrl(selectedTechnology.photo, selectedTechnology.nom)" alt="{{ selectedTechnology.nom }}">
        </div>
        <p class="tech-modal-description">{{ selectedTechnology.description }}</p>
        <div class="tech-modal-details">
          <p><strong>Prix:</strong> ${{ selectedTechnology.prix }}</p>
          <p><strong>Disponible:</strong> {{ selectedTechnology.disponible ? 'Oui' : 'Non' }}</p>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-close-view" (click)="closeTechnologyModal()">Fermer</button>
      </div>
    </div>
  </div>
  <div class="modal-backdrop" [class.show]="showTechnologyModal" (click)="closeTechnologyModal()"></div>
</div>