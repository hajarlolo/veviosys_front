<div class="forgot-password-container">
  <div class="forgot-password-wrapper">
    <!-- Left Panel - Branding (same as login) -->
    <div class="forgot-password-left">
      <div class="veviosys-branding">
        <h1>VevioSys</h1>
        <p>Intégrateur des solutions digitals</p>
      </div>
      <div class="tech-background"></div>
    </div>

    <!-- Right Panel - Form -->
    <div class="forgot-password-right">
      <div class="forgot-password-card">
        <!-- STEP 1: Request Password Reset -->
        <div *ngIf="step === 'request'" class="step-content">
          <div class="forgot-password-header">
            <h2>Mot de passe oublié?</h2>
            <p>Entrez votre email et nous vous enverrons un lien pour réinitialiser votre mot de passe</p>
          </div>

          <form (ngSubmit)="requestPasswordReset()" class="forgot-password-form">
            <div class="form-group">
              <label for="email">Email</label>
              <div class="input-wrapper">
                <span class="input-icon material-icons">mail</span>
                <input 
                  type="email" 
                  id="email" 
                  [(ngModel)]="email" 
                  name="email" 
                  placeholder="Ex. nom@entreprise.com"
                  [disabled]="loading"
                  required>
              </div>
            </div>

            <div *ngIf="errorMessage" class="error-message">
              <span class="error-icon material-icons">error</span>
              {{ errorMessage }}
            </div>

            <div *ngIf="message" class="success-message">
              <span class="success-icon material-icons">check_circle</span>
              {{ message }}
            </div>

            <button type="submit" class="btn-submit" [disabled]="loading">
              {{ loading ? 'Envoi en cours...' : 'Envoyer le lien de réinitialisation' }}
            </button>
          </form>
        </div>

        <!-- STEP 2: Reset Password with Token -->
        <div *ngIf="step === 'reset'" class="step-content">
          <div class="forgot-password-header">
            <h2>Réinitialiser le mot de passe</h2>
            <p>Entrez votre nouveau mot de passe</p>
          </div>

          <form (ngSubmit)="resetPassword()" class="forgot-password-form">
            <div class="form-group">
              <label for="newPassword">Nouveau mot de passe</label>
              <div class="input-wrapper">
                <span class="input-icon material-icons">lock</span>
                <input 
                  type="password" 
                  id="newPassword" 
                  [(ngModel)]="newPassword" 
                  name="newPassword" 
                  placeholder="Votre nouveau mot de passe"
                  [disabled]="loading"
                  required>
              </div>
            </div>

            <div class="form-group">
              <label for="confirmPassword">Confirmer le mot de passe</label>
              <div class="input-wrapper">
                <span class="input-icon material-icons">lock</span>
                <input 
                  type="password" 
                  id="confirmPassword" 
                  [(ngModel)]="confirmPassword" 
                  name="confirmPassword" 
                  placeholder="Confirmer votre nouveau mot de passe"
                  [disabled]="loading"
                  required>
              </div>
            </div>

            <div *ngIf="errorMessage" class="error-message">
              <span class="error-icon material-icons">error</span>
              {{ errorMessage }}
            </div>

            <div *ngIf="message" class="success-message">
              <span class="success-icon material-icons">check_circle</span>
              {{ message }}
            </div>

            <button type="submit" class="btn-submit" [disabled]="loading">
              {{ loading ? 'Réinitialisation en cours...' : 'Réinitialiser le mot de passe' }}
            </button>
          </form>
        </div>

        <!-- Back to Login Link -->
        <div class="back-to-login">
          <button type="button" class="btn-back" (click)="backToLogin()">
            <span class="material-icons">arrow_back</span>
            Retour à la connexion
          </button>
        </div>
      </div>

      <div class="forgot-password-footer">
        <p>© 2024 VevioSys. Tous droits réservés.</p>
      </div>
    </div>
  </div>
</div>
